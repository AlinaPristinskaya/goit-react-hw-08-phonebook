(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{16:function(t,e,n){t.exports={input:"LoginView_input__1rP-7",container:"LoginView_container__3VLIR",row:"LoginView_row__JOQGZ",col25:"LoginView_col25__3MUvP","col-75":"LoginView_col-75__3__GG","col-25":"LoginView_col-25__1Sr_5",gradientButton:"LoginView_gradientButton__2yCIs",form:"LoginView_form__1zswJ"}},22:function(t,e,n){t.exports={contacts:"PersoneEditor_contacts__3f3wa",span:"PersoneEditor_span__1lb5g",contactsLi:"PersoneEditor_contactsLi__31K-8",gradientButton:"PersoneEditor_gradientButton__3BSJA"}},25:function(t,e,n){t.exports={form:"Form_form__3Qb-D",input:"Form_input__1Hfvc"}},35:function(t,e,n){t.exports={navlinks:"AuthNav_navlinks__jBtpH",active:"AuthNav_active__3xtYr"}},36:function(t,e,n){t.exports={label:"Filter_label__RnXeK"}},47:function(t,e,n){t.exports={header:"AppBar_header__16l2q"}},54:function(t,e,n){},86:function(t,e,n){"use strict";n.r(e);var c=n(0),a=n.n(c),r=n(26),s=n.n(r),o=n(17),i=n(45),u=(n(54),n(27)),l=function(t){return t.contacts.filter},b={getItems:function(t){return t.contacts.items},getFilter:l,getVisibleContacts:Object(u.a)([l,function(t){return t.contacts.items.entities}],(function(t,e){var n=t.toLowerCase();return e.filter((function(t){return t.name.toLowerCase().includes(n)}))}))},d=n(2),j=n(4),f=Object(j.b)("todos/addContactRequest"),O=Object(j.b)("contacts/addContactSuccess"),h=Object(j.b)("todos/addContactError"),g=Object(j.b)("todos/deleteContactRequest"),p=Object(j.b)("todos/deleteContactSuccess"),m=Object(j.b)("todos/deleteContactError"),x=Object(j.b)("contacts/filter"),v=Object(j.b)("contacts/changeFilter"),C=Object(j.b)("contacts/fetchContactsRequest"),_=Object(j.b)("contacts/fetchContactsRequest"),w={fetchContactsError:Object(j.b)("contacts/fetchContactsRequest"),fetchContactsSuccess:_,fetchContactsRequest:C,changeFilterContacts:v,filterContacts:x,addContactRequest:f,addContactSuccess:O,addContactError:h,deleteContactRequest:g,deleteContactSuccess:p,deleteContactError:m},y=n(6),k={getIsLoggedIn:function(t){return t.auth.isLoggedIn},getIsAuthenticated:function(t){return t.auth.isAuthenticated},getUsername:function(t){return t.auth.user.name},getIsRefreshing:function(t){return t.auth.isRefreshing}},S=n(1),L={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}};var R=function(){var t=Object(d.d)(k.getIsLoggedIn);return Object(S.jsx)("nav",{children:t&&Object(S.jsx)(o.b,{to:"/contacts",exact:!0,style:L.link,activeStyle:L.activeLink,children:Object(S.jsx)("h2",{children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d\u043d\u0430\u044f \u043a\u043d\u0438\u0433\u0430 "})})})},I=n(13),N=n.n(I),E=n(20),q=n(12),A=n.n(q);A.a.defaults.baseURL="https://connections-api.herokuapp.com";var F=function(t){A.a.defaults.headers.common.Authorization="Bearer ".concat(t)},B=function(){A.a.defaults.headers.common.Authorization=""},V=Object(j.c)("auth/register",function(){var t=Object(E.a)(N.a.mark((function t(e){var n,c;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,A.a.post("/users/signup",e);case 3:return n=t.sent,c=n.data,F(c.token),t.abrupt("return",c);case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()),U=Object(j.c)("auth/login",function(){var t=Object(E.a)(N.a.mark((function t(e){var n,c;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,A.a.post("/users/login",e);case 3:return n=t.sent,c=n.data,F(c.token),t.abrupt("return",c);case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()),D={register:V,logOut:Object(j.c)("auth/logout",Object(E.a)(N.a.mark((function t(){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,A.a.post("/users/logout");case 3:B(),t.next=8;break;case 6:t.prev=6,t.t0=t.catch(0);case 8:case"end":return t.stop()}}),t,null,[[0,6]])})))),logIn:U,getCurrentUser:Object(j.c)("users/current",function(){var t=Object(E.a)(N.a.mark((function t(e,n){var c,a,r,s;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=n.getState(),null!==(a=c.auth.token)){t.next=4;break}return t.abrupt("return",n.rejectWithValue());case 4:return F(a),t.prev=5,t.next=8,A.a.get("/users/current");case 8:return r=t.sent,s=r.data,console.log(s),t.abrupt("return",s);case 14:t.prev=14,t.t0=t.catch(5),console.log(t.t0);case 17:case"end":return t.stop()}}),t,null,[[5,14]])})));return function(e,n){return t.apply(this,arguments)}}())},z={container:{display:"flex",alignItems:"center"},avatar:{marginRight:4},name:{fontWeight:700,marginRight:12}};var J=function(){var t=Object(d.c)(),e=Object(d.d)(k.getUsername);return Object(S.jsxs)("div",{style:z.container,children:[Object(S.jsxs)("span",{style:z.name,children:["Welcome, ",e]}),Object(S.jsx)("button",{type:"button",onClick:function(){return t(D.logOut())},children:"Logout"})]})},P=n(35),H=n.n(P);var T=function(){return Object(S.jsxs)("div",{children:[Object(S.jsx)(o.b,{to:"/register",exact:!0,className:H.a.navlinks,children:" \u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(S.jsx)(o.b,{to:"/login",className:H.a.navlinks,children:" \u041b\u043e\u0433\u0438\u043d "})]})},W=n(47),Z=n.n(W),G=function(){var t=Object(d.d)(k.getIsLoggedIn);return Object(S.jsxs)("header",{className:Z.a.header,children:[Object(S.jsx)(R,{}),t?Object(S.jsx)(J,{}):Object(S.jsx)(T,{})]})},M=n(18),K=n(16),Q=n.n(K),X={form:{width:320},label:{display:"flex",flexDirection:"column",marginBottom:15}};var Y={onLogin:D.logIn},$=Object(d.b)(null,Y)((function(){var t=Object(d.c)(),e=Object(c.useState)(""),n=Object(M.a)(e,2),a=n[0],r=n[1],s=Object(c.useState)(""),o=Object(M.a)(s,2),i=o[0],u=o[1],l=function(t){var e=t.target,n=e.name,c=e.value;switch(n){case"email":return r(c);case"password":return u(c);default:return}};return Object(S.jsxs)("div",{className:Q.a.container,children:[Object(S.jsx)("h1",{children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043b\u043e\u0433\u0438\u043d\u0430"}),Object(S.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(D.logIn({email:a,password:i})),r(""),u("")},style:X.form,autoComplete:"off",className:Q.a.form,children:[" ",Object(S.jsx)("div",{class:Q.a.row,children:Object(S.jsx)("div",{class:Q.a.col25,children:Object(S.jsxs)("label",{className:Q.a.label,children:["\u041f\u043e\u0447\u0442\u0430",Object(S.jsx)("div",{class:"col-75",children:Object(S.jsx)("input",{className:Q.a.input,type:"email",name:"email",value:a,onChange:l})})]})})}),Object(S.jsx)("div",{class:Q.a.row,children:Object(S.jsx)("div",{class:Q.a.col25,children:Object(S.jsxs)("label",{className:Q.a.label,children:["\u041f\u0430\u0440\u043e\u043b\u044c",Object(S.jsx)("div",{class:"col-75",children:Object(S.jsx)("input",{type:"password",name:"password",value:i,onChange:l})})]})})}),Object(S.jsx)("button",{type:"submit",className:Q.a.gradientButton,children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})),tt={form:{width:320},label:{display:"flex",flexDirection:"column",marginBottom:15}};var et={onRegister:D.register},nt=Object(d.b)(null,et)((function(){var t=Object(d.c)(),e=Object(c.useState)(""),n=Object(M.a)(e,2),a=n[0],r=n[1],s=Object(c.useState)(""),o=Object(M.a)(s,2),i=o[0],u=o[1],l=Object(c.useState)(""),b=Object(M.a)(l,2),j=b[0],f=b[1],O=function(t){var e=t.target,n=e.name,c=e.value;switch(n){case"name":return r(c);case"email":return u(c);case"password":return f(c);default:return}};return Object(S.jsxs)("div",{children:[Object(S.jsx)("h1",{children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438"}),Object(S.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(D.register({name:a,email:i,password:j})),r(""),u(""),f("")},autoComplete:"off",style:tt.form,children:[Object(S.jsxs)("label",{style:tt.label,children:["\u0418\u043c\u044f",Object(S.jsx)("input",{type:"text",name:"name",value:a,onChange:O})]}),Object(S.jsxs)("label",{style:tt.label,children:["\u041f\u043e\u0447\u0442\u0430",Object(S.jsx)("input",{type:"email",name:"email",value:i,onChange:O})]}),Object(S.jsxs)("label",{style:tt.label,children:["\u041f\u0430\u0440\u043e\u043b\u044c",Object(S.jsx)("input",{type:"password",name:"password",value:j,onChange:O})]}),Object(S.jsx)("button",{type:"submit",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]})]})})),ct=n(36),at=n.n(ct),rt=Object(d.b)((function(t){return{value:b.getFilter(t)}}),(function(t){return{onChange:function(e){return t(w.changeFilterContacts(e.target.value))}}}))((function(t){var e=t.value,n=t.onChange;return Object(S.jsxs)("label",{className:at.a.label,children:[Object(S.jsx)("b",{children:"\u0424\u0438\u043b\u044c\u0442\u0440 \u043f\u043e \u0438\u043c\u0435\u043d\u0438"}),Object(S.jsx)("input",{className:at.a.input,type:"Text",value:e,onChange:n})]})})),st=n(87),ot=n(25),it=n.n(ot);A.a.defaults.baseURL="https://connections-api.herokuapp.com";var ut={fetchContacts:function(){return function(){var t=Object(E.a)(N.a.mark((function t(e){var n,c;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(w.fetchContactsRequest()),t.prev=1,t.next=4,A.a.get("/contacts");case 4:n=t.sent,c=n.data,e(w.fetchContactsSuccess(c)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),e(w.fetchContactsError(t.t0));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},addContact:function(t){var e=t.name,n=t.number;return function(t){var c={id:Object(st.a)(),name:e,number:n};t(w.addContactRequest()),A.a.post("/contacts",c).then((function(e){var n=e.data;return t(w.addContactSuccess(n))})).catch((function(e){return t(w.addContactError(e))}))}},deleteContact:function(t){return function(e){e(w.deleteContactRequest()),A.a.delete("/contacts/".concat(t)).then((function(){return e(w.deleteContactSuccess(t))})).catch((function(t){return e(w.deleteContactError(t))}))}}};var lt=Object(d.b)((function(t){return{entities:b.getVisibleContacts(t)}}),(function(t){return{onSubmit:function(e){return t(ut.addContact(e))}}}))((function(t){var e=t.onSubmit,n=t.entities,a=Object(c.useState)(""),r=Object(M.a)(a,2),s=r[0],o=r[1],i=Object(c.useState)(""),u=Object(M.a)(i,2),l=u[0],b=u[1],d=Object(st.a)(),j=Object(st.a)(),f=function(){o(""),b("")};return Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)("form",{className:it.a.form,onSubmit:function(t){t.preventDefault(),n.find((function(t){return t.name===s}))?alert("".concat(s," is already on contacts")):(e({name:s,number:l}),f()),f()},children:[Object(S.jsx)("label",{htmlFor:d,children:" Name "}),Object(S.jsx)("input",{className:it.a.input,id:d,onChange:function(t){var e=t.currentTarget.value;o(e)},value:s,type:"text",name:"name",pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"\u0418\u043c\u044f \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0437 \u0431\u0443\u043a\u0432, \u0430\u043f\u043e\u0441\u0442\u0440\u043e\u0444\u0430, \u0442\u0438\u0440\u0435 \u0438 \u043f\u0440\u043e\u0431\u0435\u043b\u043e\u0432. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan \u0438 \u0442. \u043f.",required:!0}),Object(S.jsx)("label",{htmlFor:j,children:" Number "}),Object(S.jsx)("input",{className:it.a.input,id:j,onChange:function(t){console.log(t);var e=t.currentTarget.value;b(e)},value:l,type:"tel",name:"number",pattern:"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}",title:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0446\u0438\u0444\u0440 \u0438 \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043f\u0440\u043e\u0431\u0435\u043b\u044b, \u0442\u0438\u0440\u0435, \u043a\u0440\u0443\u0433\u043b\u044b\u0435 \u0441\u043a\u043e\u0431\u043a\u0438 \u0438 \u043c\u043e\u0436\u0435\u0442 \u043d\u0430\u0447\u0438\u043d\u0430\u0442\u044c\u0441\u044f \u0441 +",required:!0}),Object(S.jsx)("button",{className:it.a.button,type:"submit",children:"Add contact"})]})})})),bt=n(22),dt=n.n(bt);var jt=Object(d.b)((function(t){return{persons:b.getVisibleContacts(t)}}),(function(t){return{onDeleteContacts:function(e){return t(ut.deleteContact(e))}}}))((function(t){var e=t.persons,n=t.onDeleteContacts,a=Object(d.c)();return Object(c.useEffect)((function(){a(ut.fetchContacts())}),[a]),Object(S.jsx)(S.Fragment,{children:Object(S.jsx)("div",{className:dt.a.contacts,children:e.length?Object(S.jsx)("ul",{className:dt.a.contacts,children:e.map((function(t){return Object(S.jsxs)("li",{className:dt.a.contactsLi,children:[Object(S.jsxs)("span",{className:dt.a.span,children:[t.name,":",t.number]}),Object(S.jsx)("button",{className:dt.a.gradientButton,type:"button",onClick:function(){return n(t.id)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]},t.id)}))}):Object(S.jsx)("p",{children:"No entries in the phone book"})})})}));var ft=function(){var t=Object(d.c)();return Object(c.useEffect)((function(){return t(ut.fetchContacts())}),[t]),Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(lt,{}),Object(S.jsx)(rt,{}),Object(S.jsx)(jt,{})]})},Ot=n(15),ht=n(29),gt=["children"];var pt=function(t){var e=t.children,n=Object(ht.a)(t,gt),c=Object(d.d)(k.getIsLoggedIn);return Object(S.jsx)(y.b,Object(Ot.a)(Object(Ot.a)({},n),{},{children:c?e:Object(S.jsx)(y.a,{to:"/login"})}))},mt=["children","restricted"];var xt=function(t){var e=t.children,n=t.restricted,c=void 0!==n&&n,a=Object(ht.a)(t,mt),r=Object(d.d)(k.getIsLoggedIn)&&c;return Object(S.jsx)(y.b,Object(Ot.a)(Object(Ot.a)({},a),{},{children:r?Object(S.jsx)(y.a,{to:"/contacts"}):e}))};var vt,Ct,_t,wt,yt=Object(d.b)((function(t){return{items:b.getItems(t),filter:b.getFilter(t)}}),(function(t){return{formSubmitHandler:function(e){return t(w.addContacts(e))},getVisibleContacts:function(e){return t(w.filterContacts(e))},deleteContacts:function(e){return t(w.deleteContacts(e))}}}))((function(t){t.formSubmitHandler,t.getVisibleContacts,t.deleteContacts;var e=Object(d.c)(),n=Object(d.d)(k.getIsRefreshing);return Object(c.useEffect)((function(){e(D.getCurrentUser())}),[e]),!n&&Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(G,{}),Object(S.jsxs)(y.d,{children:[Object(S.jsx)(xt,{exact:!0,path:"/register",restricted:!0,children:Object(S.jsx)(nt,{})}),Object(S.jsx)(xt,{path:"/login",restricted:!0,children:Object(S.jsx)($,{})}),Object(S.jsx)(pt,{path:"/contacts",children:Object(S.jsx)(ft,{})})]})]})})),kt=n(30),St=n(19),Lt=n(48),Rt=n.n(Lt),It=n(5),Nt=n(7),Et=Object(j.d)([],(vt={},Object(It.a)(vt,w.fetchContactsSuccess,(function(t,e){return e.payload})),Object(It.a)(vt,w.addContactSuccess,(function(t,e){var n=e.payload;return[].concat(Object(kt.a)(t),[n])})),Object(It.a)(vt,w.deleteContactSuccess,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),vt)),qt=Object(j.d)(!1,(Ct={},Object(It.a)(Ct,w.fetchContactsRequest,(function(){return!0})),Object(It.a)(Ct,w.fetchContactsSuccess,(function(){return!1})),Object(It.a)(Ct,w.fetchContactsError,(function(){return!1})),Object(It.a)(Ct,w.addContactRequest,(function(){return!0})),Object(It.a)(Ct,w.addContactSuccess,(function(){return!1})),Object(It.a)(Ct,w.addContactError,(function(){return!1})),Object(It.a)(Ct,w.deleteContactRequest,(function(){return!0})),Object(It.a)(Ct,w.deleteContactSuccess,(function(){return!1})),Object(It.a)(Ct,w.deleteContactError,(function(){return!1})),Ct)),At=Object(j.d)(null,(_t={},Object(It.a)(_t,w.fetchContactsRequest,(function(){return null})),Object(It.a)(_t,w.fetchContactsError,(function(){return null})),_t)),Ft=Object(j.d)("",Object(It.a)({},w.changeFilterContacts,(function(t,e){return e.payload}))),Bt=Object(Nt.b)({items:Object(Nt.b)({entities:Et,isLoading:qt,error:At}),filter:Ft}),Vt=Object(j.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isRefreshing:!1},extraReducers:(wt={},Object(It.a)(wt,D.register.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLoggedIn=!0})),Object(It.a)(wt,D.logIn.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLoggedIn=!0})),Object(It.a)(wt,D.logOut.fulfilled,(function(t){t.user={name:null,email:null},t.token=null,t.isLoggedIn=!1})),Object(It.a)(wt,D.getCurrentUser.pending,(function(t,e){t.isRefreshing=!0})),Object(It.a)(wt,D.getCurrentUser.fulfilled,(function(t,e){t.user=Object(Ot.a)({},e.payload),t.isLoggedIn=!0,t.isRefreshing=!1})),Object(It.a)(wt,D.getCurrentUser.rejected,(function(t,e){t.isRefreshing=!1})),wt)}).reducer,Ut=Object(kt.a)(Object(j.f)({serializableCheck:{ignoredActions:[St.a,St.f,St.b,St.c,St.d,St.e]}})),Dt={key:"auth",storage:Rt.a,whitelist:["token"]},zt=Object(j.a)({reducer:{auth:Object(St.g)(Dt,Vt),contacts:Bt},middleware:Ut,devTools:!1}),Jt={store:zt,persistor:Object(St.h)(zt)};console.log(Jt.store),console.log(Jt.store.getState()),s.a.render(Object(S.jsx)(a.a.StrictMode,{children:Object(S.jsx)(d.a,{store:Jt.store,children:Object(S.jsx)(i.a,{loading:null,persistor:Jt.persistor,children:Object(S.jsx)(o.a,{children:Object(S.jsx)(yt,{})})})})}),document.getElementById("root"))}},[[86,1,2]]]);
//# sourceMappingURL=main.60ed76a7.chunk.js.map